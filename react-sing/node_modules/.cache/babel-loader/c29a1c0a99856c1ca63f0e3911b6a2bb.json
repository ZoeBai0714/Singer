{"ast":null,"code":"var _jsxFileName = \"/Users/xuebai/flatiron/Singer/react-sing/src/Component/Recorder.js\";\nimport React from 'react';\nimport { ReactMic } from 'react-mic';\nimport socketIO from 'socket.io-client'; //const io = socketIO('localhost:3000/')\n\nconst io = socketIO('http://10.185.5.84:3000/'); // import AudioContext from './AudioContext';\n// import AudioPlay from './AudioPlay'\n\nexport default class Recorder extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      record: false\n    };\n\n    this.startRecording = () => {\n      this.setState({\n        record: true\n      }); // start converting blob into buffer for live stream\n      // setTimeout(this.onData, 1000)\n    };\n\n    this.stopRecording = () => {\n      this.setState({\n        record: false\n      });\n    };\n\n    this.onData = recordedBlob => {\n      //console.log('chunk of real-time data is: ', recordedBlob);\n      // fetch(recordedBlob)\n      //   .then(res => res.arrayBuffer())\n      //   .then(bufferData => {\n      console.log(recordedBlob);\n      this.props.sendAudioBuffer(recordedBlob); // }\n      ///*console.log(bufferData)*/)\n    };\n\n    this.onStop = recordedBlob => {\n      console.log('recordedBlob is: ', recordedBlob);\n      this.setState({\n        record: false,\n        blobURL: recordedBlob.blobURL\n      });\n      this;\n    };\n\n    this.play = () => {\n      console.log('you reached me');\n      const audio = new Audio(this.state.audioSrc);\n      audio.play();\n    };\n  }\n\n  render() {\n    const blobURL = this.state.blobURL;\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57\n      },\n      __self: this\n    }, React.createElement(ReactMic, {\n      record: this.state.record,\n      className: \"sound-wave\",\n      onStop: this.onStop,\n      onData: this.onData,\n      strokeColor: \"#000000\",\n      backgroundColor: \"#FF4081\",\n      nonstop: true,\n      duration: 5,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      onClick: this.startRecording,\n      type: \"button\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60\n      },\n      __self: this\n    }, \"Start\"), React.createElement(\"button\", {\n      onClick: this.stopRecording,\n      type: \"button\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61\n      },\n      __self: this\n    }, \"Stop\"), React.createElement(\"button\", {\n      onClick: this.play,\n      type: \"button\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62\n      },\n      __self: this\n    }, \"Play\"), React.createElement(\"article\", {\n      class: \"clip\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63\n      },\n      __self: this\n    }, React.createElement(\"audio\", {\n      ref: \"audioSource\",\n      controls: \"controls\",\n      src: blobURL,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65\n      },\n      __self: this\n    }, \"Delete\")));\n  }\n\n}\n/*\n audioURL = window.URL.createObjectURL(blob);\n  audio.src = audioURL;\n*/","map":{"version":3,"sources":["/Users/xuebai/flatiron/Singer/react-sing/src/Component/Recorder.js"],"names":["React","ReactMic","socketIO","io","Recorder","Component","state","record","startRecording","setState","stopRecording","onData","recordedBlob","console","log","props","sendAudioBuffer","onStop","blobURL","play","audio","Audio","audioSrc","render"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,QAAT,QAAyB,WAAzB;AACA,OAAOC,QAAP,MAAqB,kBAArB,C,CACA;;AACA,MAAMC,EAAE,GAAGD,QAAQ,CAAC,0BAAD,CAAnB,C,CAEA;AACA;;AACA,eAAe,MAAME,QAAN,SAAuBJ,KAAK,CAACK,SAA7B,CAAuC;AAAA;AAAA;AAAA,SAClDC,KADkD,GAC1C;AACJC,MAAAA,MAAM,EAAE;AADJ,KAD0C;;AAAA,SAKlDC,cALkD,GAKjC,MAAM;AACnB,WAAKC,QAAL,CAAc;AACZF,QAAAA,MAAM,EAAE;AADI,OAAd,EADmB,CAInB;AACA;AACD,KAX+C;;AAAA,SAahDG,aAbgD,GAahC,MAAM;AACpB,WAAKD,QAAL,CAAc;AACZF,QAAAA,MAAM,EAAE;AADI,OAAd;AAGD,KAjB+C;;AAAA,SAmBhDI,MAnBgD,GAmBtCC,YAAD,IAAiB;AACxB;AACA;AACA;AACA;AACEC,MAAAA,OAAO,CAACC,GAAR,CAAYF,YAAZ;AACI,WAAKG,KAAL,CAAWC,eAAX,CAA2BJ,YAA3B,EANkB,CAOtB;AACA;AACH,KA5B+C;;AAAA,SA8BhDK,MA9BgD,GA8BtCL,YAAD,IAAiB;AACxBC,MAAAA,OAAO,CAACC,GAAR,CAAY,mBAAZ,EAAiCF,YAAjC;AACA,WAAKH,QAAL,CAAc;AACVF,QAAAA,MAAM,EAAC,KADG;AAEVW,QAAAA,OAAO,EAAEN,YAAY,CAACM;AAFZ,OAAd;AAIA;AACD,KArC+C;;AAAA,SAuCjDC,IAvCiD,GAuC1C,MAAK;AACVN,MAAAA,OAAO,CAACC,GAAR,CAAY,gBAAZ;AACA,YAAMM,KAAK,GAAG,IAAIC,KAAJ,CAAU,KAAKf,KAAL,CAAWgB,QAArB,CAAd;AACAF,MAAAA,KAAK,CAACD,IAAN;AACD,KA3CgD;AAAA;;AA6ClDI,EAAAA,MAAM,GAAE;AAAA,UACCL,OADD,GACY,KAAKZ,KADjB,CACCY,OADD;AAEJ,WACG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACA,oBAAC,QAAD;AAAU,MAAA,MAAM,EAAE,KAAKZ,KAAL,CAAWC,MAA7B;AAAqC,MAAA,SAAS,EAAC,YAA/C;AAA4D,MAAA,MAAM,EAAE,KAAKU,MAAzE;AAAiF,MAAA,MAAM,EAAE,KAAKN,MAA9F;AACC,MAAA,WAAW,EAAC,SADb;AACuB,MAAA,eAAe,EAAC,SADvC;AACiD,MAAA,OAAO,EAAE,IAD1D;AACgE,MAAA,QAAQ,EAAE,CAD1E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADA,EAGC;AAAQ,MAAA,OAAO,EAAE,KAAKH,cAAtB;AAAsC,MAAA,IAAI,EAAC,QAA3C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAHD,EAIC;AAAQ,MAAA,OAAO,EAAE,KAAKE,aAAtB;AAAqC,MAAA,IAAI,EAAC,QAA1C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAJD,EAKC;AAAQ,MAAA,OAAO,EAAE,KAAKS,IAAtB;AAA4B,MAAA,IAAI,EAAC,QAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cALD,EAMC;AAAS,MAAA,KAAK,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACA;AAAO,MAAA,GAAG,EAAG,aAAb;AAA2B,MAAA,QAAQ,EAAG,UAAtC;AAAiD,MAAA,GAAG,EAAID,OAAxD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADA,EAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAFA,CAND,CADH;AAaH;;AA5DiD;AA+DtD","sourcesContent":["import React from 'react';\nimport { ReactMic } from 'react-mic';\nimport socketIO from 'socket.io-client';\n//const io = socketIO('localhost:3000/')\nconst io = socketIO('http://10.185.5.84:3000/')\n\n// import AudioContext from './AudioContext';\n// import AudioPlay from './AudioPlay'\nexport default class Recorder extends React.Component {\n    state = {\n        record: false\n    }\n\n    startRecording = () => {\n        this.setState({\n          record: true\n        });\n        // start converting blob into buffer for live stream\n        // setTimeout(this.onData, 1000)\n      }\n    \n      stopRecording = () => {\n        this.setState({\n          record: false\n        });\n      }\n    \n      onData = (recordedBlob)=> {\n        //console.log('chunk of real-time data is: ', recordedBlob);\n        // fetch(recordedBlob)\n        //   .then(res => res.arrayBuffer())\n        //   .then(bufferData => {\n          console.log(recordedBlob)\n              this.props.sendAudioBuffer(recordedBlob)\n          // }\n          ///*console.log(bufferData)*/)\n      }\n    \n      onStop = (recordedBlob)=> {\n        console.log('recordedBlob is: ', recordedBlob);\n        this.setState({\n            record:false,\n            blobURL: recordedBlob.blobURL\n        })\n        this\n      }\n      \n     play = () =>{\n       console.log('you reached me')\n       const audio = new Audio(this.state.audioSrc)\n       audio.play()       \n     }\n \n    render(){\n      const {blobURL} = this.state\n        return(\n           <div>\n           <ReactMic record={this.state.record} className=\"sound-wave\" onStop={this.onStop} onData={this.onData}\n            strokeColor=\"#000000\" backgroundColor=\"#FF4081\" nonstop={true} duration={5} />\n            <button onClick={this.startRecording} type=\"button\">Start</button>\n            <button onClick={this.stopRecording} type=\"button\">Stop</button>\n            <button onClick={this.play} type=\"button\">Play</button>\n            <article class=\"clip\">\n            <audio ref = \"audioSource\" controls = \"controls\" src = {blobURL} ></audio>\n            <button>Delete</button>\n            </article>\n           </div>\n        )\n    }\n}\n\n/*\n audioURL = window.URL.createObjectURL(blob);\n  audio.src = audioURL;\n*/\n"]},"metadata":{},"sourceType":"module"}